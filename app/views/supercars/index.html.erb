<h1>All the supercars, dawg!</h1>
<br>

<h4>Most Recently Indexed Supercars</h4>
<br>
<table class="table table-striped">
  <tr>
    <th><h3>Make</h3></th>
    <th><h3>Model</h3></th>
    <th><h3>City</h3></th>
    <th><h3>Country</h3></th>
    <th><h3>Spotted By</h3></th>
    <th></th>
  </tr>
  <% @supercars.each do |supercar| %>
    <tr>
      <td>
        <h5>
          <% if supercar.make.tag_list.count %>
            <% supercar.make.tag_list.each do |tag| %>
              <p><%= link_to tag, makes_tag_path(tag) %></p>
            <% end %>
          <% else %>
          <% end %>
        </h5>
      </td>
      <td>
      <h5><h5>
          <% if supercar.car_model.tag_list.count %>
            <% supercar.car_model.tag_list.each do |tag| %>
              <p><%= link_to tag, models_tag_path(tag) %></p>
            <% end %>
          <% else %>
          <% end %>
        </h5>
        </td>
      <td><h5><%= link_to supercar.city.tag_list, cities_tag_path(supercar.city.tag_list) %></h5></td>
      <td><h5><%= link_to supercar.country.tag_list, countries_tag_path(supercar.country.tag_list) %></h5></td>
      <td> 
        <% if supercar.user %>
          <%= supercar.user.username %>
        <% else %>
        <% end %>
      </td>
      <td> <%= link_to 'Edit', edit_supercar_path(supercar) %> </td>   
    </tr>
  <% end %>
</table>
<div style="text-align: right;">
 <%= will_paginate @supercars, renderer: BootstrapPagination::Rails %>  
</div>
<br>

<div class="container" id="tourpackages-carousel">
  <% @supercars.each_slice(3).each do |group| %>
      <div class="row">
      <% group.each do |supercar| %>
        <div id ="thumb-grid" class="col-xs-18 col-sm-6 col-m-4 col-lg-4">
          <div class="thumbnail">
            <div class = "insta-thumb">       
              <% resource = OEmbed::Providers::Instagram.get("#{supercar.img_url}") %>           
              <%= render :inline => resource.html.html_safe %>
            </div>
            <div class="caption">
            <br>     
              <h4>Manufacturer:</h4>       
              <h5>
              <% if supercar.make.tag_list.count %>
                <% supercar.make.tag_list.each do |tag| %>
                  <p><%= link_to tag, makes_tag_path(tag) %></p>
                <% end %>
              <% else %>
              <% end %>
              </h5>
              <h4>Model:</h4>  
              <h5>
              <% if supercar.car_model.tag_list.count %>
                <% supercar.car_model.tag_list.each do |tag| %>
                  <p><%= link_to tag, models_tag_path(tag) %></p>
                <% end %>
              <% else %>
              <% end %>
              </h5>
              <h4>City:</h4>  
              <h5><%= link_to supercar.city.tag_list, cities_tag_path(supercar.city.tag_list) %></h5>
              <h4>Country:</h4>
              <h5><%= link_to supercar.country.tag_list, countries_tag_path(supercar.country.tag_list) %></h5>
              <% if supercar.user %>
                  <h4>Spotted by:</h4>
                  <p><%= supercar.user.username %></p>
                <% else %>
              <% end %>                                              
            </div>
          </div>
        </div>
      <% end %>
    </div><!-- End row -->
  <% end %>
  <div style="text-align: right;"> 
  <%= will_paginate @supercars, renderer: BootstrapPagination::Rails %>
  </div>  
</div><!-- End container -->